# ğŸš€ YuTax - ç‰¹ä¾›ç‰ˆå¤šå›½å®¶ç¨æ”¶ç³»ç»Ÿ

> **âš¡ ä¸€ä¸ªä¸“ä¸º Minecraft ç¤¾ä¼šæ¨¡æ‹ŸæœåŠ¡å™¨æ‰“é€ çš„ç»ˆæç¨æ”¶æ’ä»¶**

[![Version](https://img.shields.io/badge/ç‰ˆæœ¬-ç¤¾ä¼šæ¨¡æ‹Ÿç‰¹ä¾›ç‰ˆ-blueviolet?style=flat-square)](https://github.com/thisxiaoyuQAQ/YuTaxo)
[![Minecraft](https://img.shields.io/badge/Minecraft-1.16%2B-brightgreen?style=flat-square)](https://www.spigotmc.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow?style=flat-square)](https://opensource.org/licenses/MIT)
[![Vault](https://img.shields.io/badge/ä¾èµ–-Vault-orange?style=flat-square)](https://www.spigotmc.org/resources/vault.34315/)

---

## ğŸŒŸ é¡¹ç›®ç®€ä»‹

**YuTax** æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Minecraft æœåŠ¡å™¨ç¨æ”¶æ’ä»¶ï¼Œæ”¯æŒ**å¤šå›½å®¶ç‹¬ç«‹ç¨æ”¶ç³»ç»Ÿ**ã€**VIPç­‰çº§ç¨ç‡ä¼˜æƒ **ã€**è‡ªåŠ¨å›½ç¨ç§¯ç´¯**ã€**è¯¦ç»†äº¤æ˜“æ—¥å¿—**ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ä¸“ä¸ºç¤¾ä¼šæ¨¡æ‹ŸæœåŠ¡å™¨è®¾è®¡ï¼Œè®©ä½ çš„æœåŠ¡å™¨ç»æµç³»ç»Ÿæ›´åŠ çœŸå®æœ‰è¶£ï¼

### âœ¨ æ ¸å¿ƒç‰¹æ€§

| åŠŸèƒ½ | æè¿° | çŠ¶æ€ |
|------|------|------|
| ğŸ° **å¤šå›½å®¶ç³»ç»Ÿ** | æ”¯æŒç«ä¹‹å›½ã€å…‰ä¹‹å›½ã€çˆ±ä¸½è²è‰å¨…æ–¯ã€å¤©ç©ºåŸå››ä¸ªå›½å®¶ | âœ… å·²å®ç° |
| ğŸ’° **æ™ºèƒ½ç¨æ”¶** | æ ¹æ®ç©å®¶ä½™é¢å’Œè·å¾—é‡‘é¢è‡ªåŠ¨è®¡ç®—ç¨æ”¶ | âœ… å·²å®ç° |
| ğŸ–ï¸ **VIPç­‰çº§ä¼˜æƒ ** | ä¸åŒVIPç­‰çº§äº«å—ä¸åŒç¨ç‡æŠ˜æ‰£ | âœ… å·²å®ç° |
| ğŸ“Š **å›½ç¨ç§¯ç´¯** | è‡ªåŠ¨ç»Ÿè®¡å„å›½å›½ç¨æ€»é¢ | âœ… å·²å®ç° |
| ğŸ“ **è¯¦ç»†æ—¥å¿—** | è®°å½•æ¯ä¸€ç¬”ç¨æ”¶äº¤æ˜“ | âœ… å·²å®ç° |
| ğŸ›¡ï¸ **å…ç¨æƒé™** | ç‰¹æƒç©å®¶å¯è±å…ç¨æ”¶ | âœ… å·²å®ç° |
| âš¡ **å®æ—¶é‡è½½** | æ”¯æŒé…ç½®çƒ­é‡è½½ | âœ… å·²å®ç° |

---

## ğŸ® ä½¿ç”¨æ¼”ç¤º

### å›½ç‹æ“ä½œ

```bash
# è®¾ç½®å›½å®¶ç¨ç‡
/aili tax 0.1          # çˆ±ä¸½è²è‰å¨…æ–¯ç¨ç‡è®¾ä¸º 10%
/hzg tax 0.15          # ç«ä¹‹å›½ç¨ç‡è®¾ä¸º 15%
/gzg tax 0.08          # å…‰ä¹‹å›½ç¨ç‡è®¾ä¸º 8%
/tkc tax 0.12          # å¤©ç©ºåŸç¨ç‡è®¾ä¸º 12%

# æŸ¥çœ‹å›½ç¨æƒ…å†µ
/aili look             # æŸ¥çœ‹çˆ±ä¸½è²è‰å¨…æ–¯ç¨ç‡å’Œæ€»å›½ç¨
/hzg look              # æŸ¥çœ‹ç«ä¹‹å›½ç¨ç‡å’Œæ€»å›½ç¨
```

### ç®¡ç†å‘˜æ“ä½œ

```bash
# è®¾ç½®å›½ç¨æ€»é¢
/aili set 10000        # è®¾ç½®çˆ±ä¸½è²è‰å¨…æ–¯å›½ç¨ä¸º 10000
/tax reload            # é‡è½½æ’ä»¶é…ç½®
```

### ç©å®¶ä½“éªŒ

å½“ç©å®¶æ”¶åˆ°é‡‘å¸æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è§¦å‘ç¨æ”¶ï¼š

```
[çˆ±ä¸½è²è‰å¨…æ–¯] å°é›¨ æ”¶åˆ°äº† 5000 é‡‘å¸, æ‰£é™¤äº† 500 é‡‘å¸ä½œä¸ºç¨æ”¶ã€‚ ç»“ä½™ 4500 ä½™é¢ 9500 ç¨ç‡ 10%
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### config.yml

```yaml
# å›½å®¶åŸºç¡€ç¨ç‡
aili: 0.1              # çˆ±ä¸½è²è‰å¨…æ–¯
guangzhiguo: 0.1       # å…‰ä¹‹å›½
huozhiguo: 0.1         # ç«ä¹‹å›½
tiankongcheng: 0.1     # å¤©ç©ºåŸ

# å…ç¨æƒå¼€å…³
AvoidTax: true

# ç¨æ”¶å±‚çº§é…ç½®
tax1:
  money: 10000         # ç©å®¶æŒæœ‰é‡‘é¢é—¨æ§›
  receive: 1000        # å•æ¬¡è·å¾—é‡‘é¢é—¨æ§›
  defaultRate: 0.01    # æ™®é€šç©å®¶ç¨ç‡
  defaultMsg: "&a%player% æ”¶åˆ°äº† %receive% é‡‘å¸..."
  taxRate1: 0.009      # VIP (tax.1) ç¨ç‡
  msg1: "&aå°Šè´µçš„ &8[&aVIP&8] &a%player% ..."
  taxRate2: 0.007      # MVP (tax.2) ç¨ç‡
  msg2: "&aå°Šè´µçš„ &8[&bMVP&8] &a%player% ..."

tax2:
  money: 0
  receive: 1000
  defaultRate: 0.2
  # ... æ›´å¤šé…ç½®
```

### æ¶ˆæ¯å˜é‡æ›¿æ¢

| å˜é‡ | è¯´æ˜ |
|------|------|
| `%player%` | ç©å®¶åç§° |
| `%receive%` | æ”¶åˆ°çš„é‡‘é¢ |
| `%tax%` | æ‰£é™¤çš„ç¨é¢ |
| `%left%` | ç¨åæ‰€å¾— |
| `%money%` | ç¨åä½™é¢ |
| `%taxRate%` | ç¨ç‡ç™¾åˆ†æ¯” |
| `&` | é¢œè‰²ä»£ç  (è‡ªåŠ¨è½¬æ¢ä¸º Â§) |

---

## ğŸ”§ æƒé™èŠ‚ç‚¹

| æƒé™ | è¯´æ˜ | é€‚ç”¨å‘½ä»¤ |
|------|------|----------|
| `tax.reload` | é‡è½½æ’ä»¶ | `/tax reload` |
| `aili.tax` | è®¾ç½®çˆ±ä¸½è²è‰å¨…æ–¯ç¨ç‡ | `/aili tax <value>` |
| `aili.look` | æŸ¥çœ‹çˆ±ä¸½è²è‰å¨…æ–¯ä¿¡æ¯ | `/aili look` |
| `hzg.tax` | è®¾ç½®ç«ä¹‹å›½ç¨ç‡ | `/hzg tax <value>` |
| `hzg.look` | æŸ¥çœ‹ç«ä¹‹å›½ä¿¡æ¯ | `/hzg look` |
| `gzg.tax` | è®¾ç½®å…‰ä¹‹å›½ç¨ç‡ | `/gzg tax <value>` |
| `gzg.look` | æŸ¥çœ‹å…‰ä¹‹å›½ä¿¡æ¯ | `/gzg look` |
| `tkc.tax` | è®¾ç½®å¤©ç©ºåŸç¨ç‡ | `/tkc tax <value>` |
| `tkc.look` | æŸ¥çœ‹å¤©ç©ºåŸä¿¡æ¯ | `/tkc look` |
| `tax.admin` | è®¾ç½®å›½ç¨æ€»é¢ | `/<country> set <value>` |
| `tax.bypass` | å…ç¨æƒé™ | - |
| `tax.1` | VIP ç­‰çº§ç¨ç‡ | - |
| `tax.2` | MVP ç­‰çº§ç¨ç‡ | - |
| `hzg.tax.hand` | ç«ä¹‹å›½å›½æ°‘æƒé™ | - |
| `gzg.tax.hand` | å…‰ä¹‹å›½å›½æ°‘æƒé™ | - |
| `aili.tax.hand` | çˆ±ä¸½è²è‰å¨…æ–¯å›½æ°‘æƒé™ | - |
| `tkc.tax.hand` | å¤©ç©ºåŸå›½æ°‘æƒé™ | - |

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
Tax/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ xiaoyu/
â”‚       â”œâ”€â”€ tax.java              # ä¸»ç±» & åˆå§‹åŒ–
â”‚       â”œâ”€â”€ command/
â”‚       â”‚   â”œâ”€â”€ aili.java         # çˆ±ä¸½è²è‰å¨…æ–¯å‘½ä»¤
â”‚       â”‚   â”œâ”€â”€ guangzhiguo.java  # å…‰ä¹‹å›½å‘½ä»¤
â”‚       â”‚   â”œâ”€â”€ huozhiguo.java    # ç«ä¹‹å›½å‘½ä»¤
â”‚       â”‚   â”œâ”€â”€ tiankongcheng.java # å¤©ç©ºåŸå‘½ä»¤
â”‚       â”‚   â””â”€â”€ reload.java       # é‡è½½å‘½ä»¤
â”‚       â”œâ”€â”€ event/
â”‚       â”‚   â””â”€â”€ CMI_event.java    # CMI äº‹ä»¶ç›‘å¬
â”‚       â””â”€â”€ metrics/
â”‚           â””â”€â”€ Metrics.java      # ç»Ÿè®¡æ•°æ®
â”œâ”€â”€ config.yml                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ totalTax.yml                  # ç©å®¶ç¨æ”¶ç»Ÿè®¡
â”œâ”€â”€ countryTax.yml                # å›½å®¶ç¨æ”¶ç»Ÿè®¡
â”œâ”€â”€ countryTaxPlayer.yml          # ç©å®¶å›½ç¨ç»Ÿè®¡
â”œâ”€â”€ log.yml                       # äº¤æ˜“æ—¥å¿—
â””â”€â”€ plugin.yml                    # æ’ä»¶ä¿¡æ¯
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®éœ€æ±‚

- âœ… Minecraft æœåŠ¡å™¨ (1.16+)
- âœ… [Vault](https://www.spigotmc.org/resources/vault.34315/) æ’ä»¶
- âœ… ä»»æ„ç»æµæ’ä»¶ (å¦‚ EssentialsX, CMI ç­‰)

### å®‰è£…æ­¥éª¤

1. **ä¸‹è½½æ’ä»¶**
   ```bash
   git clone https://github.com/your-repo/Tax.git
   cd Tax
   ```

2. **ç¼–è¯‘æ’ä»¶**
   ```bash
   # ä½¿ç”¨ Maven
   mvn clean package

   # æˆ–ä½¿ç”¨ IDE (IntelliJ IDEA / Eclipse)
   ```

3. **éƒ¨ç½²åˆ°æœåŠ¡å™¨**
   ```bash
   # å°†ç¼–è¯‘å¥½çš„ Tax.jar æ”¾å…¥ plugins æ–‡ä»¶å¤¹
   cp target/Tax.jar /path/to/your/server/plugins/
   ```

4. **å¯åŠ¨æœåŠ¡å™¨**
   ```bash
   # æœåŠ¡å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶
   # é¦–æ¬¡å¯åŠ¨åè¯·ä¿®æ”¹ config.yml
   ```

5. **é…ç½®æƒé™**
   ```bash
   # ä½¿ç”¨æƒé™ç®¡ç†æ’ä»¶ (å¦‚ LuckPerms)
   # ä¸ºå›½ç‹åˆ†é…æƒé™: aili.tax, hzg.tax, gzg.tax, tkc.tax
   # ä¸ºVIPåˆ†é…æƒé™: tax.1, tax.2
   # ä¸ºå›½æ°‘åˆ†é…æƒé™: hzg.tax.hand ç­‰
   ```

---

## ğŸ¯ ç¨æ”¶æµç¨‹è¯¦è§£

### 1. ç©å®¶æ”¶åˆ°é‡‘å¸
```
ç©å®¶è·å¾— 5000 é‡‘å¸
```

### 2. ç³»ç»Ÿåˆ¤æ–­æ¡ä»¶
- âœ… ç©å®¶æ²¡æœ‰ `tax.bypass` æƒé™
- âœ… ç©å®¶å±äºæŸä¸ªå›½å®¶ (æ‹¥æœ‰ `*.tax.hand` æƒé™)
- âœ… ç©å®¶ä½™é¢è¾¾åˆ°é—¨æ§›
- âœ… è·å¾—é‡‘é¢è¾¾åˆ°é—¨æ§›

### 3. è®¡ç®—ç¨æ”¶
```
ç¨ç‡ = å›½å®¶åŸºç¡€ç¨ç‡ - VIPæŠ˜æ‰£
ç¨é¢ = è·å¾—é‡‘é¢ Ã— ç¨ç‡
å®é™…è·å¾— = è·å¾—é‡‘é¢ - ç¨é¢
```

### 4. æ›´æ–°æ•°æ®
- ğŸ“Š ç©å®¶ä¸ªäººç¨æ”¶ç»Ÿè®¡
- ğŸ›ï¸ å›½å®¶æ€»ç¨æ”¶ç»Ÿè®¡
- ğŸ“ äº¤æ˜“æ—¥å¿—è®°å½•

### 5. å‘é€æ¶ˆæ¯
```
[ç«ä¹‹å›½] ç©å®¶å æ”¶åˆ°äº† 5000 é‡‘å¸, æ‰£é™¤äº† 500 é‡‘å¸ä½œä¸ºç¨æ”¶ã€‚ ç»“ä½™ 4500 ä½™é¢ 9500 ç¨ç‡ 10%
```

---

## ğŸ“Š æ•°æ®æ–‡ä»¶è¯´æ˜

### totalTax.yml
è®°å½•æ¯ä¸ªç©å®¶çš„ç´¯è®¡ç¨æ”¶è´¡çŒ®
```yaml
å°é›¨: 12500.5
ç©å®¶A: 8900.0
```

### countryTax.yml
è®°å½•å„å›½å›½ç¨æ€»é¢
```yaml
aili: 50000.0
huozhiguo: 75000.0
guangzhiguo: 62000.0
tiankongcheng: 45000.0
```

### countryTaxPlayer.yml
è®°å½•ç©å®¶å¯¹å„å›½çš„ç¨æ”¶è´¡çŒ®
```yaml
aili:
  å°é›¨: 15000.0
  ç©å®¶A: 8000.0
huozhiguo:
  å°é›¨: 25000.0
```

### log.yml
è¯¦ç»†äº¤æ˜“æ—¥å¿— (æŒ‰æ—¶é—´æˆ³è®°å½•)
```yaml
"2025-12-24 15:30:25": "[ç«ä¹‹å›½] å°é›¨ æ”¶åˆ°äº† 5000 é‡‘å¸..."
"2025-12-24 15:31:10": "[å…‰ä¹‹å›½] ç©å®¶A æ”¶åˆ°äº† 3000 é‡‘å¸..."
```

---

## ğŸ” æ•…éšœæ’é™¤

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æ’ä»¶æ— æ³•åŠ è½½ | æ£€æŸ¥æ˜¯å¦å®‰è£… Vault å’Œç»æµæ’ä»¶ |
| ç¨æ”¶æœªè§¦å‘ | æ£€æŸ¥ç©å®¶æ˜¯å¦æœ‰å¯¹åº”å›½å®¶æƒé™ |
| é…ç½®ä¸ç”Ÿæ•ˆ | ä½¿ç”¨ `/tax reload` é‡è½½é…ç½® |
| æƒé™æ— æ•ˆ | æ£€æŸ¥æƒé™æ’ä»¶é…ç½®ï¼Œç¡®ä¿æƒé™å·²æ­£ç¡®åˆ†é… |
| æ•°æ®æœªä¿å­˜ | æ£€æŸ¥æœåŠ¡å™¨æ–‡ä»¶å†™å…¥æƒé™ |

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä¾èµ–ç®¡ç†

```xml
<!-- pom.xml -->
<dependencies>
    <dependency>
        <groupId>org.spigotmc</groupId>
        <artifactId>spigot-api</artifactId>
        <version>1.16.5-R0.1-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>net.milkbowl.vault</groupId>
        <artifactId>vault-api</artifactId>
        <version>1.7</version>
        <scope>provided</scope>
    </dependency>
</dependencies>
```

### äº‹ä»¶ç›‘å¬

æ’ä»¶ç›‘å¬ `CMIUserBalanceChangeEvent` äº‹ä»¶ (éœ€è¦ CMI æ’ä»¶)

```java
@EventHandler
public void onMoneyReceived(CMIUserBalanceChangeEvent event) {
    // å¤„ç†ç¨æ”¶é€»è¾‘
}
```

### æ‰©å±•æ–°å›½å®¶

1. åˆ›å»ºæ–°çš„å‘½ä»¤ç±» (å‚è€ƒ `aili.java`)
2. åœ¨ `plugin.yml` æ·»åŠ å‘½ä»¤
3. åœ¨ `config.yml` æ·»åŠ å›½å®¶ç¨ç‡é…ç½®
4. åœ¨ `CMI_event.java` çš„ `easy()` æ–¹æ³•ä¸­æ·»åŠ å›½å®¶åˆ¤æ–­

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- âœ… ä½¿ç”¨ YamlConfiguration é«˜æ•ˆè¯»å†™
- âœ… å»¶è¿Ÿæ–‡ä»¶ä¿å­˜ (æ‰¹é‡æ“ä½œ)
- âœ… æƒé™æ£€æŸ¥ä¼˜åŒ– (çŸ­è·¯åˆ¤æ–­)
- âœ… æ•°å­—æ ¼å¼åŒ–ç¼“å­˜

---

## ğŸ¨ å½©è‰²æ¶ˆæ¯ç¤ºä¾‹

```yaml
# æ”¯æŒæ‰€æœ‰ Minecraft é¢œè‰²ä»£ç 
defaultMsg: "&6&l[ç¨æ”¶] &a%player% &fè·å¾— &e%receive% &fé‡‘å¸, &cæ‰£é™¤ &e%tax% &fç¨é‡‘, &aç»“ä½™ &e%left%"
# æ˜¾ç¤ºæ•ˆæœ: [ç¨æ”¶] å°é›¨ è·å¾— 5000 é‡‘å¸, æ‰£é™¤ 500 ç¨é‡‘, ç»“ä½™ 4500
```

---

<div align="center">

**å¦‚æœè¿™ä¸ªæ’ä»¶å¸®åŠ©åˆ°äº†ä½ çš„æœåŠ¡å™¨ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by å°é›¨

</div>
